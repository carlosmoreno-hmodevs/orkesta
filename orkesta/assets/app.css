/* Variables y base en theme.css (alineado al Gestor de Tareas) */

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:var(--font);
  background:var(--bg);
  color:var(--ink);
}

a{color:inherit; text-decoration:none}
.small{font-size:var(--font-size-xs);color:var(--muted)}
.badge{display:inline-flex;align-items:center;gap:var(--spacing-sm);font-size:var(--font-size-xs);padding:6px 10px;border:1px solid var(--line);border-radius:999px;background:var(--color-bg-card);font-family:var(--font)}
.badge .dot{width:10px;height:10px;border-radius:50%}
.dot.good{background:var(--good)} .dot.warn{background:var(--warn)} .dot.bad{background:var(--bad)}

.app{
  display:grid;
  grid-template-columns: 260px 1fr;
  height:100vh;
}

.sidebar{
  background:var(--sidebar-bg, var(--color-bg-card));
  color:var(--ink);
  padding:var(--spacing-md) 12px;
  display:flex;
  flex-direction:column;
  gap:var(--spacing-sm);
  border-right:1px solid var(--sidebar-border, var(--line));
  box-shadow:1px 0 0 0 var(--line);
}

.brand{
  display:flex;align-items:center;gap:var(--spacing-sm);
  padding:var(--spacing-sm) var(--spacing-md);
  border-radius:var(--radius-md);
  background:#ffffff;
  box-shadow:0 1px 3px rgba(0,0,0,.06);
}
.brand.brandHome{
  width:100%;
  border:none;
  cursor:pointer;
  font:inherit;
  color:inherit;
  text-align:left;
  transition:background .2s ease, box-shadow .2s ease;
}
.brand.brandHome:hover{
  background:#f8f9fb;
  box-shadow:0 2px 6px rgba(0,0,0,.08);
}
.brand.brandHome:active{transform:scale(.99)}
.brandlogo{
  width:40px;height:40px;
  border-radius:50%;
  background:rgba(0,0,0,.05);
  padding:4px;
  object-fit:contain;
}
.brandtext{flex:1;min-width:0;text-align:center}
.brand .t1{font-weight:var(--font-weight-bold);font-size:var(--font-size-sm);letter-spacing:.02em;color:var(--ink)}
.brand .t2{font-size:var(--font-size-xs);color:var(--muted);margin-top:2px}

.navgrp{margin-top:4px}
.navgrp .hdr{
  font-size:12px;
  color:var(--muted);
  padding:10px 10px 6px;
  text-transform:uppercase;
  letter-spacing:.12em;
}

.navitem, .subitem{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  padding:10px 10px;
  border-radius:var(--radius-md);
  cursor:pointer;
  user-select:none;
  color:var(--ink);
}
.navitem:hover, .subitem:hover{background:rgba(0,0,0,.04)}
.navitem.active, .subitem.active{background:rgba(33,150,243,.1);color:var(--color-primary)}
.navleft{display:flex;align-items:center;gap:10px}
.ico{
  width:22px;height:22px;border-radius:6px;
  background:rgba(0,0,0,.06);
  display:grid;place-items:center;
  flex:0 0 auto;
}
.navitem.active .ico,.subitem.active .ico{background:rgba(33,150,243,.15)}
.chev{opacity:.8}

.submenu{margin-left:8px;margin-top:4px;border-left:1px solid var(--line);padding-left:10px;display:none}
.navitem.open + .submenu{display:block}
.subitem{padding:9px 10px;border-radius:var(--radius-md);font-size:13px}

/* --- Menú lateral: estilo Gestor (fondo claro, ítem activo azul pill) --- */
.navModern{margin-top:4px; flex:1 1 auto; overflow:auto; padding-bottom:8px}
.navModern .hdr{
  font-size:11px;
  color:var(--muted);
  padding:10px 10px 6px;
  text-transform:uppercase;
  letter-spacing:.12em;
}

.tileGrid{
  display:grid;
  grid-template-columns: repeat(2, minmax(0,1fr));
  gap:8px;
  padding:6px 6px 10px;
}

.navTile{
  appearance:none;
  border:none;
  background:#ffffff;
  color:var(--ink);
  border-radius:var(--radius-md);
  padding:12px 8px 10px;
  cursor:pointer;
  text-align:center;
  transition:background .2s ease, color .2s ease, box-shadow .2s ease;
  user-select:none;
  box-shadow:0 1px 2px rgba(0,0,0,.05);
}
.navTile:hover{background:#ffffff; color:var(--ink); box-shadow:0 2px 6px rgba(0,0,0,.08)}
.navTile:active{transform:scale(.98)}
.navTile.active{
  background:rgba(33,150,243,.12);
  color:var(--color-primary);
  box-shadow:0 1px 3px rgba(33,150,243,.2);
}

.tileIcon{
  width:40px;height:40px;
  border-radius:var(--radius-md);
  margin:0 auto 8px;
  display:grid;place-items:center;
  background:rgba(0,0,0,.05);
  font-size:20px;
}
.navTile.active .tileIcon{background:rgba(33,150,243,.15)}
.tileLbl{font-weight:var(--font-weight-bold); font-size:12px; letter-spacing:.08em; text-transform:uppercase}
.tileHint{margin-top:4px; font-size:11px; color:var(--muted)}
.navTile.active .tileHint{color:var(--color-primary);opacity:.9}

.subPanel{padding:8px 6px 10px}
.subHdr{display:flex; align-items:baseline; justify-content:space-between; gap:10px; padding:0 6px 8px}
.subHdrTitle{font-weight:var(--font-weight-bold); font-size:12px; letter-spacing:.08em; text-transform:uppercase; color:var(--ink)}
.subHdrSub{font-size:11px; color:var(--muted)}

.subGrid{display:grid; grid-template-columns: repeat(2, minmax(0,1fr)); gap:8px; padding:0 6px}
.subTile{
  appearance:none;
  border:1px solid rgba(0,0,0,.06);
  background:#ffffff;
  color:var(--ink);
  border-radius:var(--radius-md);
  padding:10px 8px;
  cursor:pointer;
  text-align:left;
  display:flex;
  align-items:center;
  gap:10px;
  transition:background .2s ease, color .2s ease, border-color .2s ease, box-shadow .2s ease;
  box-shadow:0 1px 2px rgba(0,0,0,.04);
}
.subTile:hover{background:#ffffff; border-color:rgba(0,0,0,.08); box-shadow:0 2px 5px rgba(0,0,0,.06)}
.subTile:active{transform:scale(.98)}
.subTile.active{
  background:rgba(33,150,243,.12);
  color:var(--color-primary);
  border-color:rgba(33,150,243,.25);
  box-shadow:0 1px 3px rgba(33,150,243,.18);
}
.subIcon{
  width:36px;height:36px;
  border-radius:var(--radius-md);
  background:rgba(0,0,0,.05);
  display:grid;place-items:center;
  flex:0 0 auto;
  font-size:18px;
}
.subTile.active .subIcon{background:rgba(33,150,243,.15)}
.subLbl{font-weight:var(--font-weight-semibold); font-size:13px; letter-spacing:.2px}

.sidebar .foot{
  margin-top:auto;
  padding:var(--spacing-sm) 0;
  border-radius:var(--radius-md);
  background:transparent;
  box-shadow:none;
  display:flex;
  flex-direction:column;
  gap:var(--spacing-sm);
}
.portalBtn{
  display:block;
  width:100%;
  text-align:center;
  padding:12px 16px;
  border-radius:999px;
  font-family:var(--font);
  font-size:var(--font-size-sm);
  font-weight:var(--font-weight-semibold);
  color:#fff;
  text-decoration:none;
  background:linear-gradient(180deg, #1976d2 0%, #1565c0 100%);
  box-shadow:0 2px 8px rgba(0,0,0,.2);
  cursor:pointer;
  transition:background .2s ease, box-shadow .2s ease, transform .05s ease;
  line-height:1.3;
  border:none;
}
.portalBtn:hover{
  background:linear-gradient(180deg, #1e88e5 0%, #1976d2 100%);
  box-shadow:0 3px 12px rgba(0,0,0,.25);
  color:#fff;
}
.portalBtn:active{transform:scale(.98)}
.whatsappBtn{
  display:block;
  width:100%;
  appearance:none;
  border:none;
  border-radius:999px;
  padding:12px 16px;
  font-family:var(--font);
  font-size:var(--font-size-sm);
  font-weight:var(--font-weight-semibold);
  color:#fff;
  background:linear-gradient(180deg, #4a4a4a 0%, #3a3a3a 100%);
  box-shadow:0 2px 8px rgba(0,0,0,.25);
  cursor:pointer;
  transition:background .2s ease, box-shadow .2s ease, transform .05s ease;
  text-align:center;
  line-height:1.3;
}
.whatsappBtn:hover{
  background:linear-gradient(180deg, #555 0%, #444 100%);
  box-shadow:0 3px 12px rgba(0,0,0,.3);
}
.whatsappBtn:active{transform:scale(.98)}
.whatsappBtn[aria-expanded="true"]{background:linear-gradient(180deg, #505050 0%, #404 100%)}

/* Modal WhatsApp QR */
.whatsappOverlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.55);
  backdrop-filter:blur(4px);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:100;
  padding:var(--spacing-lg);
  box-sizing:border-box;
}
.whatsappOverlay[aria-hidden="false"],
.whatsappOverlay.open{
  display:flex;
}
.whatsappModal{
  background:linear-gradient(180deg, #2d2d2d 0%, #1f1f1f 100%);
  border-radius:var(--radius-lg);
  padding:var(--spacing-xl);
  max-width:380px;
  width:100%;
  box-shadow:0 20px 60px rgba(0,0,0,.5);
  text-align:center;
  font-family:var(--font);
}
.whatsappModalTitle{
  margin:0 0 var(--spacing-sm);
  font-size:1.5rem;
  font-weight:var(--font-weight-bold);
  color:#fff;
  letter-spacing:-.02em;
}
.whatsappModalLead{
  margin:0 0 var(--spacing-lg);
  font-size:var(--font-size-base);
  color:rgba(255,255,255,.9);
  line-height:1.45;
}
.whatsappQrWrap{
  background:#fff;
  border-radius:var(--radius-md);
  padding:14px;
  margin:0 auto var(--spacing-lg);
  display:inline-block;
  box-shadow:0 4px 20px rgba(0,0,0,.25);
}
.whatsappQrImg{
  display:block;
  width:200px;
  height:200px;
  object-fit:contain;
}
.whatsappModalSteps{
  margin:0 0 var(--spacing-lg);
  font-size:var(--font-size-sm);
  color:rgba(255,255,255,.75);
  line-height:1.5;
}
.whatsappModalClose{
  appearance:none;
  border:1px solid rgba(255,255,255,.3);
  background:rgba(255,255,255,.1);
  color:#fff;
  padding:10px 20px;
  border-radius:var(--radius-md);
  font-family:var(--font);
  font-size:var(--font-size-sm);
  font-weight:var(--font-weight-semibold);
  cursor:pointer;
  transition:background .2s ease, border-color .2s ease;
}
.whatsappModalClose:hover{
  background:rgba(255,255,255,.18);
  border-color:rgba(255,255,255,.5);
}

.main{
  display:flex;
  flex-direction:column;
  min-width:0;
}

.topbar{
  min-height:64px;
  height:64px;
  background:var(--color-bg-card);
  border-bottom:1px solid var(--line);
  box-shadow:0 1px 3px rgba(0,0,0,.06);
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:0 var(--spacing-lg);
  gap:var(--spacing-md);
  position:relative;
  border-top:3px solid var(--color-primary);
  flex-wrap:nowrap;
  box-sizing:border-box;
}
.topbar .toolbar{
  flex:1 1 auto;
  min-width:0;
  display:flex;
  align-items:center;
  gap:var(--spacing-md);
}
.topbar .tabs{
  display:flex;
  align-items:center;
  gap:2px;
  padding:0;
  background:transparent;
  border:none;
  flex:1 1 auto;
  min-width:0;
  overflow-x:auto;
  overflow-y:hidden;
  -webkit-overflow-scrolling:touch;
  scrollbar-width:thin;
}
.topbar .tabs::-webkit-scrollbar{height:4px;}
.tab{
  padding:10px 14px;
  border-radius:var(--radius-md);
  font-size:var(--font-size-sm);
  font-family:var(--font);
  cursor:pointer;
  color:var(--muted);
  font-weight:var(--font-weight-medium);
  transition:background .2s ease, color .2s ease;
  border:none;
  background:transparent;
  white-space:nowrap;
  flex-shrink:0;
  line-height:1.25;
  align-self:center;
}
.tab:hover{
  color:var(--ink);
  background:rgba(0,0,0,.04);
}
.tab.active{
  background:var(--color-primary);
  color:#fff;
  font-weight:var(--font-weight-semibold);
  box-shadow:var(--shadow-sm);
}

.topbar .filters{
  display:flex;
  align-items:center;
  gap:10px;
  flex-shrink:0;
  flex-wrap:wrap;
}
.topbar .select{
  display:inline-flex;
  align-items:center;
  gap:var(--spacing-sm);
  background:var(--color-bg-card);
  border:1px solid var(--border-color);
  padding:6px 10px;
  border-radius:var(--radius-sm);
  font-size:var(--font-size-sm);
  font-family:var(--font);
  color:var(--muted);
  line-height:1.25;
  flex-shrink:0;
}
.select{
  display:flex;
  align-items:center;
  gap:var(--spacing-sm);
  background:var(--color-bg-card);
  border:1px solid var(--border-color);
  padding:8px 12px;
  border-radius:var(--radius-sm);
  font-size:var(--font-size-sm);
  font-family:var(--font);
  color:var(--muted);
}
select{
  border:0;
  background:transparent;
  outline:0;
  color:var(--ink);
  font-weight:var(--font-weight-semibold);
  font-family:var(--font);
}
.select:focus-within{
  border-color:var(--color-primary);
  box-shadow:0 0 0 2px rgba(33,150,243,.25);
}

.topbar .actions{
  display:flex;
  align-items:center;
  gap:10px;
  flex-shrink:0;
  margin-left:auto;
}
.actions{
  display:flex;
  align-items:center;
  gap:10px;
}
.btn{
  border:1px solid var(--line);
  background:var(--color-bg-card);
  padding:var(--spacing-sm) 12px;
  border-radius:var(--radius-md);
  cursor:pointer;
  font-weight:var(--font-weight-semibold);
  font-size:var(--font-size-sm);
  font-family:var(--font);
  transition:background .15s ease, box-shadow .15s ease;
}
.btn:hover{
  background:rgba(0,0,0,.04);
}
.btn.primary{
  background:var(--color-primary);
  color:#fff;
  border-color:transparent;
}
.btn.primary:hover{
  background:var(--color-primary-dark);
  box-shadow:0 2px 8px rgba(33,150,243,.35);
}
.btn:active{transform:translateY(1px)}

.content{
  padding:var(--spacing-lg);
  overflow:auto;
  background:var(--color-bg);
}

.grid{
  display:grid;
  grid-template-columns: 1fr 1fr 1fr;
  gap:14px;
}

.card{
  background:var(--surface);
  border:1px solid var(--line);
  border-radius:var(--radius-md);
  box-shadow:var(--shadow);
  padding:var(--spacing-lg);
  min-width:0;
  font-family:var(--font);
}
.card h3{margin:0;font-size:var(--font-size-sm);color:var(--muted);font-weight:var(--font-weight-bold)}
.kpi{
  display:flex;
  align-items:baseline;
  justify-content:space-between;
  gap:10px;
  margin-top:10px;
}
.kpi .val{
  font-size:2.125rem;
  font-weight:var(--font-weight-bold);
  letter-spacing:-.02em;
  font-variant-numeric: tabular-nums;
}
.kpi .sub{
  font-size:var(--font-size-xs);
  color:var(--muted);
  font-weight:var(--font-weight-semibold);
}
.spark{
  width:130px;height:46px;
}
.row{
  display:grid;
  grid-template-columns: 1.3fr 1fr;
  gap:14px;
  margin-top:14px;
}

/* --- Catálogo KPIs (Normateca): filtrado --- */
.kpiCatalogCard .filters.kpiCatalogFilters{
  display:flex;
  flex-direction:column;
  gap:1rem;
  padding:0;
  margin:0 0 1rem;
}
.kpiCatalogSearchWrap{
  width:100%;
}
.kpiCatalogSearch{
  width:100%;
  max-width:420px;
  padding:12px 16px;
  border:1px solid var(--line);
  border-radius:var(--radius-md);
  font-size:var(--font-size-base);
  font-family:var(--font);
  background:var(--color-bg-card, #fff);
  color:var(--ink);
  transition:border-color .2s, box-shadow .2s;
}
.kpiCatalogSearch::placeholder{
  color:var(--muted);
}
.kpiCatalogSearch:focus{
  outline:none;
  border-color:var(--color-primary);
  box-shadow:0 0 0 3px rgba(33,150,243,.18);
}
.kpiCatalogSelectRow{
  display:flex;
  flex-wrap:wrap;
  gap:1rem 1.5rem;
  align-items:flex-end;
}
.kpiCatalogLabel{
  display:flex;
  flex-direction:column;
  gap:6px;
  cursor:pointer;
  min-width:0;
}
.kpiCatalogLabelText{
  font-size:var(--font-size-xs);
  font-weight:var(--font-weight-bold);
  color:var(--ink);
  letter-spacing:.02em;
}
.kpiCatalogSelect{
  padding:10px 32px 10px 12px;
  min-width:140px;
  border:1px solid var(--line);
  border-radius:var(--radius-md);
  font-size:var(--font-size-sm);
  font-family:var(--font);
  background:var(--color-bg-card, #fff);
  color:var(--ink);
  cursor:pointer;
  appearance:none;
  background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%236b7280' d='M6 8L1 3h10z'/%3E%3C/svg%3E");
  background-repeat:no-repeat;
  background-position:right 12px center;
  transition:border-color .2s;
}
.kpiCatalogSelect:hover{
  border-color:var(--muted);
}
.kpiCatalogSelect:focus{
  outline:none;
  border-color:var(--color-primary);
}
.kpiCatalogHint{
  margin:0;
  font-size:var(--font-size-sm);
  color:var(--muted);
  line-height:1.4;
  padding-top:4px;
  border-top:1px solid var(--line);
}

/* --- Cat Objetivos (catálogo ferretería) --- */
.catObjetivosWrap{
  padding:var(--spacing-lg);
  font-family:var(--font);
  font-size:var(--font-size-base);
}
.catObjTitle{
  margin:0 0 var(--spacing-md);
  font-size:1.25rem;
  font-weight:var(--font-weight-bold);
  letter-spacing:-.01em;
  color:var(--ink);
}
.catObjToolbar{
  display:flex;
  flex-wrap:wrap;
  gap:var(--spacing-md);
  align-items:center;
  margin-bottom:var(--spacing-md);
  padding:var(--spacing-sm) 0;
}
.catObjToolbar .catObjField{
  display:flex;
  flex-direction:column;
  gap:6px;
}
.catObjToolbar .small{
  font-size:var(--font-size-sm);
  font-weight:var(--font-weight-semibold);
  color:var(--ink);
}
.catObjToolbar input[type="search"]{
  min-width:220px;
  padding:10px 12px;
  border:1px solid var(--line);
  border-radius:var(--radius-md);
  font-size:var(--font-size-base);
  font-family:var(--font);
  background:var(--color-bg-card);
}
.catObjToolbar select{
  min-width:160px;
  padding:10px 12px;
  border:1px solid var(--line);
  border-radius:var(--radius-md);
  font-size:var(--font-size-base);
  font-family:var(--font);
  background:var(--color-bg-card);
}
.catObjSummaryRow{
  display:grid;
  grid-template-columns: 1.2fr 1fr;
  gap:var(--spacing-md);
  margin-bottom:var(--spacing-lg);
}
.catObjPanel{
  padding:var(--spacing-lg);
  font-size:var(--font-size-base);
}
.catObjPanel h3{
  margin:0 0 var(--spacing-sm);
  font-size:1.05rem;
  font-weight:var(--font-weight-bold);
  color:var(--ink);
}
.catObjPanel .note{
  font-size:var(--font-size-base);
  line-height:1.5;
  color:var(--muted);
}
.catObjPanel .legend.catObjLegend{
  display:flex;
  gap:14px;
  flex-wrap:wrap;
  margin-top:12px;
  font-size:var(--font-size-sm);
}
.catObjPanel .legend-item{
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding:8px 14px;
  border-radius:var(--radius-md);
  font-weight:var(--font-weight-semibold);
  border:1px solid transparent;
}
.catObjPanel .legend-item .dot{
  width:12px;
  height:12px;
  border-radius:50%;
  flex-shrink:0;
}
.catObjPanel .legend-item.good{
  background:rgba(76,175,80,.18);
  border-color:rgba(76,175,80,.35);
  color:#1b5e20;
}
.catObjPanel .legend-item.good .dot{background:var(--good)}
.catObjPanel .legend-item.warn{
  background:rgba(255,152,0,.18);
  border-color:rgba(255,152,0,.4);
  color:#e65100;
}
.catObjPanel .legend-item.warn .dot{background:var(--warn)}
.catObjPanel .legend-item.bad{
  background:rgba(244,67,54,.15);
  border-color:rgba(244,67,54,.35);
  color:#b71c1c;
}
.catObjPanel .legend-item.bad .dot{background:var(--bad)}
.catObjPanel #catObjQuickText{
  font-size:var(--font-size-base);
  line-height:1.5;
  margin:0 0 6px;
}
.catObjPanel #catObjQuickSub,
.catObjPanel .small{
  font-size:var(--font-size-sm);
  color:var(--muted);
  line-height:1.4;
}
.catObjGrid{
  display:grid;
  grid-template-columns: repeat(auto-fill, minmax(360px, 1fr));
  gap:var(--spacing-lg);
}
.catObjCard{
  cursor:pointer;
  transition:box-shadow .2s ease, transform .02s ease;
  padding:var(--spacing-lg);
  font-size:var(--font-size-base);
}
.catObjCard:hover{
  box-shadow:var(--shadow-lg);
}
.catObjCardHead{
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  gap:var(--spacing-md);
  margin-bottom:var(--spacing-md);
}
.catObjCardHead .obj-title{
  margin:0 0 6px;
  font-size:1.05rem;
  font-weight:var(--font-weight-bold);
  color:var(--ink);
  line-height:1.3;
}
.catObjCardHead .quote{
  font-size:var(--font-size-sm);
  color:var(--muted);
  font-style:italic;
  line-height:1.4;
}
.catObjBadge{
  display:inline-block;
  margin-bottom:8px;
  font-size:var(--font-size-xs);
  font-weight:var(--font-weight-semibold);
  letter-spacing:.02em;
}
.catObjDonutWrap{
  flex-shrink:0;
}
.catObjDonutWrap .donut.catObjDonut{
  width:52px;
  height:52px;
}
.catObjCard .mini{
  margin:var(--spacing-md) 0;
}
.kpi-mini.catObjKpiMini{
  margin-bottom:12px;
}
.kpi-mini .left .name{
  font-size:var(--font-size-sm);
  font-weight:var(--font-weight-semibold);
  color:var(--ink);
}
.kpi-mini .left .val{
  font-size:var(--font-size-xs);
  color:var(--muted);
}
.kpi-mini .bar{
  height:8px;
  border-radius:999px;
  background:rgba(0,0,0,.08);
  overflow:hidden;
  margin-top:6px;
}
.kpi-mini .bar i{
  display:block;
  height:100%;
  border-radius:999px;
  min-width:2px;
}
.kpi-mini .bar i.ok{background:var(--good)}
.kpi-mini .bar i.warn{background:var(--warn)}
.kpi-mini .bar i.bad{background:var(--bad)}
.footer-note.catObjFooter{
  font-size:var(--font-size-sm);
  color:var(--muted);
  margin-top:var(--spacing-md);
  padding-top:var(--spacing-sm);
  border-top:1px solid var(--line);
}
.drawer .dblock .kpi-table{
  width:100%;
  border-collapse:collapse;
  font-size:13px;
}
.drawer .dblock .kpi-table td{
  padding:8px 10px;
  border-bottom:1px solid var(--line);
  vertical-align:top;
}
.drawer .dblock .kpi-table .bar{
  height:8px;
  border-radius:999px;
  background:rgba(0,0,0,.08);
  overflow:hidden;
  margin:4px 0;
}
.drawer .dblock .kpi-table .bar i{
  display:block;
  height:100%;
  border-radius:999px;
  min-width:2px;
}
.drawer .dblock .kpi-table .bar i.ok{background:var(--good)}
.drawer .dblock .kpi-table .bar i.warn{background:var(--warn)}
.drawer .dblock .kpi-table .bar i.bad{background:var(--bad)}
.drawer .dblock .kpi-table .kpi-right{
  text-align:right;
}
.drawer .dblock .kpi-table .kpi-right .chip{
  display:inline-flex;
  align-items:center;
  gap:6px;
  font-size:var(--font-size-xs);
}
.drawer .dblock .kpi-table .kpi-meta{
  font-size:11px;
  color:var(--muted);
  margin-top:4px;
}
.drawer .dblock .kpi-table .kpi-meta svg.spark.catObjSpark{
  display:inline-block;
  vertical-align:middle;
  margin-left:6px;
  width:80px;
  height:22px;
}

/* --- ERP Connect · Validación: imagen EstrategiaEjecucion (siempre visible sin scroll) --- */
.validacionWrap{
  max-width:100%;
  padding:var(--spacing-lg);
  box-sizing:border-box;
}
.validacionTitle{
  margin:0 0 var(--spacing-sm);
  font-size:1.25rem;
  font-weight:var(--font-weight-bold);
  letter-spacing:-.01em;
  color:var(--ink);
}
.validacionWrap .validacionSub{
  margin:0 0 var(--spacing-md);
  font-size:var(--font-size-base);
  line-height:1.5;
  color:var(--muted);
}
.validacionImageWrap{
  width:100%;
  margin-top:var(--spacing-md);
  overflow:hidden;
  border-radius:var(--radius-md);
  background:var(--color-bg-card);
  max-height:calc(100vh - 240px);
  display:flex;
  align-items:flex-start;
  justify-content:center;
}
.validacionHeroImg{
  display:block;
  max-width:100%;
  max-height:calc(100vh - 240px);
  width:auto;
  height:auto;
  object-fit:contain;
  object-position:center top;
  vertical-align:middle;
}
@media (max-width:1200px){
  .grid{grid-template-columns:1fr 1fr}
  .row{grid-template-columns:1fr}
  .catObjSummaryRow{grid-template-columns:1fr}
  .app{grid-template-columns: 230px 1fr;}
  .content{padding:var(--spacing-md)}
}
@media (max-width:1024px){
  .app{grid-template-columns: 200px 1fr;}
  .sidebar{padding:var(--spacing-sm) 8px;}
  .brand{padding:8px 10px;}
  .brandlogo{width:36px;height:36px;}
  .brand .t1{font-size:12px;}
  .brand .t2{font-size:10px;}
  .tileGrid{gap:6px;padding:4px 4px 8px;}
  .navTile{padding:10px 6px 8px;}
  .tileIcon{width:34px;height:34px;font-size:18px;}
  .tileLbl{font-size:11px;}
  .tileHint{font-size:10px;}
  .subTile{padding:8px 6px;}
  .subIcon{width:32px;height:32px;font-size:16px;}
  .subLbl{font-size:12px;}
  .sidebar .foot{padding:8px 10px;font-size:10px;}
  .topbar{flex-wrap:wrap;height:auto;min-height:56px;padding:10px var(--spacing-lg);gap:10px;align-content:center;}
  .topbar .toolbar{flex-wrap:wrap;min-width:0;flex:1 1 auto;gap:10px;align-items:center;}
  .topbar .tabs{overflow-x:auto;overflow-y:hidden;-webkit-overflow-scrolling:touch;flex-wrap:nowrap;max-width:100%;min-width:0;padding:0;scrollbar-width:thin;}
  .tabs::-webkit-scrollbar{height:6px;}
  .tab{padding:8px 12px;font-size:12px;white-space:nowrap;flex-shrink:0;}
  .topbar .filters{flex-wrap:wrap;gap:8px;align-items:center;}
  .topbar .actions{flex-shrink:0;align-items:center;}
  .content{padding:var(--spacing-md)}
  .validacionWrap{padding:var(--spacing-md)}
  .validacionImageWrap,.validacionHeroImg{max-height:calc(100vh - 260px)}
  .catObjGrid{grid-template-columns:repeat(auto-fill, minmax(300px, 1fr));gap:var(--spacing-md)}
  .catObjToolbar{flex-wrap:wrap;}
  .catObjToolbar input[type="search"]{min-width:160px;}
  .tablehdr{flex-wrap:wrap;gap:8px;}
  .tablehdr .right{flex-wrap:wrap;}
  .maprow{grid-template-columns:140px 1fr;gap:10px;}
  .laneLabel{min-height:80px;font-size:12px;}
  .laneCards{grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));}
}
@media (max-width:860px){
  .grid{grid-template-columns:1fr}
  .row{grid-template-columns:1fr}
}
@media (max-width:768px){
  .app{grid-template-columns:1fr;grid-template-rows:auto 1fr;}
  .sidebar{order:1;flex-direction:row;flex-wrap:wrap;align-items:center;justify-content:space-between;padding:8px var(--spacing-sm);gap:8px;border-right:none;border-bottom:1px solid var(--line);max-height: none;}
  .brand{flex:0 0 auto;padding:6px 8px;}
  .brand .t2{display:none;}
  .brandlogo{width:32px;height:32px;}
  .brand .t1{font-size:11px;}
  .navModern{flex:1 1 auto;margin-top:0;overflow:visible;padding-bottom:0;position:relative;}
  .navModern .hdr{display:none;}
  .tileGrid{grid-template-columns:repeat(4, 1fr);gap:4px;padding:0;flex:1 1 auto;justify-content:flex-end;}
  .navTile{padding:8px 4px 6px;}
  .tileIcon{width:28px;height:28px;font-size:16px;margin:0 auto 4px;}
  .tileLbl{font-size:10px;}
  .tileHint{display:none;}
  .subPanel{position:absolute;top:100%;left:0;right:0;background:var(--color-bg-card);border:1px solid var(--line);border-top:none;box-shadow:var(--shadow-lg);z-index:40;max-height:70vh;overflow-y:auto;padding:8px;}
  .subGrid{grid-template-columns:1fr;}
  .sidebar .foot{margin-top:8px;padding:6px 0;}
  .whatsappBtn{font-size:12px;padding:10px 12px;}
  .main{order:2;min-height:0;}
  .topbar{flex-direction:column;align-items:stretch;min-height:auto;padding:10px var(--spacing-sm);gap:10px;}
  .toolbar{flex-direction:column;align-items:stretch;width:100%;}
  .tabs{overflow-x:auto;-webkit-overflow-scrolling:touch;padding:6px 0;max-width:100%;}
  .tab{padding:8px 10px;font-size:11px;}
  .filters{justify-content:flex-start;}
  .actions{justify-content:flex-end;}
  .content{padding:var(--spacing-sm)}
  .validacionWrap{padding:var(--spacing-sm)}
  .validacionTitle{font-size:1.1rem;}
  .validacionWrap .validacionSub{font-size:var(--font-size-sm);margin-bottom:var(--spacing-sm);}
  .validacionImageWrap,.validacionHeroImg{max-height:calc(100vh - 280px)}
  .catObjetivosWrap{padding:var(--spacing-sm)}
  .catObjTitle{font-size:1.1rem;}
  .catObjToolbar{flex-direction:column;align-items:stretch;}
  .catObjToolbar input[type="search"],.catObjToolbar select{min-width:0;width:100%;}
  .catObjSummaryRow{grid-template-columns:1fr;}
  .catObjGrid{grid-template-columns:1fr;gap:var(--spacing-sm)}
  .catObjCardHead{flex-direction:column;}
  .catObjDonutWrap{align-self:flex-start;}
  .tablewrap{margin:0 -var(--spacing-sm);overflow-x:auto;}
  .tablehdr{flex-direction:column;align-items:flex-start;padding:var(--spacing-sm);}
  .tablehdr .right{width:100%;}
  .maprow{grid-template-columns:1fr;padding:8px 0;}
  .laneLabel{min-height:60px;font-size:11px;}
  .laneCards{grid-template-columns:1fr;}
  .drawer{width:100%;max-width:100%;right:-100%;}
  .drawer.open{right:0;}
}

.tablewrap{
  background:var(--color-bg-card);
  border:1px solid var(--line);
  border-radius:var(--radius-md);
  box-shadow:var(--shadow);
  overflow:hidden;
  font-family:var(--font);
}
.tablehdr{
  padding:var(--spacing-sm) var(--spacing-md);
  border-bottom:1px solid var(--line);
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:var(--spacing-sm);
}
.tablehdr h2{
  margin:0;
  font-size:var(--font-size-base);
  font-weight:var(--font-weight-semibold);
  letter-spacing:-.01em;
}
.tablehdr .right{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
.pills{
  display:flex;gap:var(--spacing-xs);background:var(--bg);border:1px solid var(--line);padding:var(--spacing-xs);border-radius:var(--radius-lg);
}
.pill{
  padding:var(--spacing-sm) 12px;border-radius:var(--radius-md);font-size:var(--font-size-sm);font-weight:var(--font-weight-bold);cursor:pointer;color:var(--muted);font-family:var(--font);transition:background .2s ease, color .2s ease;
}
.pill:hover{color:var(--ink);background:rgba(0,0,0,.04)}
.pill.active{background:var(--color-primary);border:1px solid var(--color-primary);color:#fff;font-weight:var(--font-weight-semibold)}
.legend{display:flex;gap:10px;align-items:center;flex-wrap:wrap}

.tbl{
  width:100%;
  border-collapse:separate;
  border-spacing:0;
  font-size:13px;
}
.tbl th, .tbl td{
  padding:10px 10px;
  border-bottom:1px solid var(--line);
  vertical-align:middle;
}
.tbl thead th{
  position:sticky;top:0;
  background:var(--color-bg-card);
  z-index:1;
  font-size:var(--font-size-xs);
  font-weight:var(--font-weight-semibold);
  color:var(--muted);
  text-transform:uppercase;
  letter-spacing:.08em;
}
.tbl .sec{
  background:linear-gradient(90deg, rgba(33,150,243,.1), rgba(33,150,243,.04));
  font-weight:var(--font-weight-bold);
  color:var(--color-primary-dark);
}
.tbl .obj{font-weight:var(--font-weight-bold)}
.tbl .kpiName{color:var(--muted);font-weight:var(--font-weight-semibold)}
.cell{
  display:inline-flex;
  align-items:center;
  justify-content:flex-end;
  width:72px;
  padding:7px 8px;
  border:1px solid var(--line);
  border-radius:10px;
  background:var(--bg);
  font-variant-numeric: tabular-nums;
  font-weight:800;
}

.cell.good{
  background:rgba(76,175,80,.12);
  border-color:rgba(76,175,80,.25);
  color:var(--color-success);
}
.cell.warn{
  background:rgba(255,152,0,.12);
  border-color:rgba(255,152,0,.3);
  color:var(--color-warning);
}
.cell.bad{
  background:rgba(244,67,54,.12);
  border-color:rgba(244,67,54,.25);
  color:var(--color-danger);
}
.cell.editable{background:var(--color-bg-card)}
.cell input{
  width:100%;
  border:0;background:transparent;outline:0;
  font-weight:900;color:var(--ink);
  text-align:right;
}

.scoreRow{
  display:grid;
  grid-template-columns: 1.2fr 1fr 0.7fr;
  gap:10px;
  align-items:center;
  padding:10px 12px;
  border-bottom:1px solid var(--line);
}
.scoreRow:last-child{border-bottom:0}
.scoreRow .name{font-weight:900}
.scoreRow .meta{font-size:12px;color:var(--muted);font-weight:800}
.meter{
  height:10px;border-radius:999px;background:var(--bg);border:1px solid var(--line);overflow:hidden
}
.meter > i{display:block;height:100%;border-radius:999px;background:var(--good);width:0%}
.pct{
  display:flex;align-items:center;justify-content:flex-end;gap:10px;
  font-weight:900;
  font-variant-numeric: tabular-nums;
}
.sema{
  width:10px;height:10px;border-radius:50%;
  background:var(--good);
}

.mapwrap{
  background:var(--color-bg-card);
  border:1px solid var(--line);
  border-radius:var(--radius-lg);
  box-shadow:var(--shadow);
  padding:var(--spacing-md);
  overflow:hidden;
  font-family:var(--font);
}
.mapgrid{
  display:grid;
  grid-template-columns: 180px 1fr;
  gap:14px;
}
.lanes{
  display:flex;
  flex-direction:column;
  gap:12px;
}
.lane{
  height:110px;
  border-radius:16px;
  border:1px solid var(--line);
  background:linear-gradient(90deg, rgba(15,23,42,.06), rgba(15,23,42,.02));
  display:flex;align-items:center;justify-content:center;
  font-weight:900;
  color:var(--muted);
}
.mapcanvas{
  position:relative;
  border-radius:16px;
  border:1px solid var(--line);
  background:linear-gradient(180deg,var(--color-bg-card),var(--color-bg));
  height:460px;
  overflow:hidden;
}
.node{
  position:absolute;
  min-width:180px;
  max-width:220px;
  padding:var(--spacing-sm) 12px;
  border-radius:var(--radius-md);
  border:1px solid rgba(33,150,243,.25);
  background:var(--color-bg-card);
  box-shadow:var(--shadow);
  cursor:pointer;
  font-family:var(--font);
}
.node .t{font-weight:var(--font-weight-bold)}
.node .s{font-size:var(--font-size-xs);color:var(--muted);font-weight:var(--font-weight-semibold);margin-top:3px}
.node .k{margin-top:var(--spacing-sm);display:flex;gap:var(--spacing-sm);align-items:center}
.node .chip{font-size:var(--font-size-xs);font-weight:var(--font-weight-bold);padding:5px 8px;border-radius:999px;background:rgba(33,150,243,.1);border:1px solid rgba(33,150,243,.2)}
.node .chip.good{background:rgba(76,175,80,.12);border-color:rgba(76,175,80,.25)}
.node .chip.warn{background:rgba(255,152,0,.14);border-color:rgba(255,152,0,.25)}
.node .chip.bad{background:rgba(244,67,54,.12);border-color:rgba(244,67,54,.25)}

.drawer{
  position:fixed;
  top:0;right:-520px;
  width:520px;max-width:95vw;
  height:100vh;
  background:var(--color-bg-card);
  border-left:1px solid var(--line);
  box-shadow:var(--shadow-lg);
  transition:right .22s ease;
  z-index:50;
  display:flex;
  flex-direction:column;
  font-family:var(--font);
}
.drawer.open{right:0}
.drawer .dh{
  padding:var(--spacing-md);
  border-bottom:1px solid var(--line);
  display:flex;align-items:flex-start;justify-content:space-between;gap:var(--spacing-sm)
}
.drawer .dh .twrap{display:flex;flex-direction:column;gap:var(--spacing-xs);min-width:0}
.drawer .dh .title{font-size:var(--font-size-base);font-weight:var(--font-weight-bold);letter-spacing:-.01em}
.drawer .dh .subtitle{font-size:var(--font-size-xs);color:var(--muted);font-weight:var(--font-weight-medium);line-height:1.35;max-width:380px}
.drawer .dh .subtitle code{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:11px;background:rgba(148,163,184,.22);border:1px solid rgba(148,163,184,.28);padding:2px 5px;border-radius:var(--radius-sm);white-space:normal}
.drawer .body{padding:var(--spacing-md);overflow:auto}
.drawer .close{border:0;background:var(--bg);border:1px solid var(--line);border-radius:var(--radius-md);padding:var(--spacing-sm) 12px;cursor:pointer;font-weight:var(--font-weight-bold);font-family:var(--font)}
.drawer .close:hover{background:rgba(0,0,0,.06)}
.dblock{margin:12px 0}
.dblock h4{margin:0 0 8px;font-size:12px;color:var(--muted);letter-spacing:.12em;text-transform:uppercase}
.list{display:grid;gap:8px}
.item{
  border:1px solid var(--line);
  border-radius:14px;
  padding:10px 12px;
  display:flex;justify-content:space-between;gap:10px;
}
.item .l{font-weight:900}
.item .r{font-weight:900;color:var(--muted)}
.drawer a.item-tareas.tareas-link,
.drawer a.item-vencidas.vencidas-link{
  text-decoration:none;
  color:inherit;
  cursor:pointer;
  transition:background .2s ease, box-shadow .2s ease;
}
.drawer a.item-tareas.tareas-link:hover{
  background:rgba(25,118,210,.06);
  box-shadow:inset 0 0 0 1px rgba(25,118,210,.2);
}
.drawer a.item-vencidas.vencidas-link:hover{
  background:rgba(198,40,40,.06);
  box-shadow:inset 0 0 0 1px rgba(198,40,40,.2);
}
.drawer a.item-vencidas .vencidas-value{
  color:#c62828;
  font-weight:700;
}
.drawer a.item-vencidas:hover .vencidas-value{
  color:#b71c1c;
}
.note{font-size:13px;color:var(--muted);line-height:1.45}

.matrix{
  display:grid;
  grid-template-columns: 1fr;
  gap:14px;
}
.initList{
  display:grid;gap:10px;
}
.initCard{
  border:1px solid var(--line);
  border-radius:var(--radius-lg);
  padding:12px;
  background:var(--color-bg-card);
  box-shadow:var(--shadow);
  cursor:pointer;
  font-family:var(--font);
}
.initCard .n{font-weight:var(--font-weight-bold)}
.initCard .m{margin-top:var(--spacing-xs);font-size:var(--font-size-xs);color:var(--muted);font-weight:var(--font-weight-semibold)}

.initCard.mini{
  box-shadow:none;
  padding:10px 12px;
}
.mtbl td.initCell{
  background:linear-gradient(90deg, rgba(33,150,243,.08), rgba(33,150,243,.03));
  min-width:360px;
}
.mtbl td.tickCell{
  /* Keep table layout intact (td must remain table-cell).
     Center the indicator without turning the cell into flex. */
  text-align:center;
}

.pmeta{
  margin-top:8px;
  display:flex;
  gap:8px;
  align-items:center;
  flex-wrap:wrap;
  font-size:12px;
  color:var(--muted);
  font-weight:900;
}
.pmeta .pmain b{color:var(--ink)}
.badge{
  padding:3px 8px;
  border-radius:999px;
  border:1px solid var(--line);
  background:var(--bg);
  font-size:11px;
  font-weight:1000;
  letter-spacing:.02em;
}
.badge.good{background:rgba(76,175,80,.12);border-color:rgba(76,175,80,.25);color:var(--color-success)}
.badge.warn{background:rgba(255,152,0,.14);border-color:rgba(255,152,0,.3);color:var(--color-warning)}
.badge.bad{background:rgba(244,67,54,.12);border-color:rgba(244,67,54,.25);color:var(--color-danger)}

.pbarDual{
  margin-top:10px;
  height:10px;
  border-radius:999px;
  background:var(--bg);
  border:1px solid var(--line);
  position:relative;
  overflow:hidden;
}
.pbarDual .actual{
  position:absolute;left:0;top:0;bottom:0;
  width:0%;
  border-radius:999px;
}
.pbarDual .expected{
  position:absolute;
  top:-3px;bottom:-3px;
  width:2px;
  background:rgba(15,23,42,.35);
  transform:translateX(-1px);
}
.pbar{margin-top:10px;height:10px;border-radius:999px;background:var(--bg);border:1px solid var(--line);overflow:hidden}
.pbar i{display:block;height:100%;width:0%;background:var(--color-primary);border-radius:999px}
.matrixTable{
  border:1px solid var(--line);
  border-radius:var(--radius-lg);
  overflow:hidden;
  background:var(--color-bg-card);
  box-shadow:var(--shadow);
  font-family:var(--font);
}
.mtbl{
  width:100%;
  border-collapse:separate;
  border-spacing:0;
  font-size:12px;
}
.mtbl th, .mtbl td{
  padding:10px 10px;
  border-bottom:1px solid var(--line);
  border-right:1px solid var(--line);
  vertical-align:middle;
}
.mtbl th:last-child, .mtbl td:last-child{border-right:0}
.mtbl thead th{
  background:var(--color-bg-card);
  position:sticky;top:0;z-index:1;
  font-size:var(--font-size-xs);font-weight:var(--font-weight-semibold);color:var(--muted);text-transform:uppercase;letter-spacing:.08em;
}

.objHead{
  display:flex;
  align-items:center;
  justify-content:center;
  gap:8px;
  min-height:26px;
}
.objIcon{
  width:28px;height:28px;
  border-radius:var(--radius-md);
  display:grid;place-items:center;
  border:1px solid var(--line);
  background:linear-gradient(180deg, rgba(33,150,243,.12), rgba(33,150,243,.06));
  color:var(--color-primary);
}
.objIcon svg{display:block}
.objIcon.margenes{
  background:linear-gradient(180deg, rgba(76,175,80,.15), rgba(76,175,80,.06));
  border-color:rgba(76,175,80,.25);
  color:var(--color-success);
}
.objIcon.liquidez{
  background:linear-gradient(180deg, rgba(33,150,243,.12), rgba(33,150,243,.06));
  border-color:rgba(33,150,243,.25);
  color:var(--color-primary);
}
.objIcon.quiebres{
  background:linear-gradient(180deg, rgba(255,152,0,.15), rgba(255,152,0,.06));
  border-color:rgba(255,152,0,.3);
  color:var(--color-warning);
}
.objLabel{white-space:nowrap}
@media (max-width: 980px){
  .objLabel{display:none}
  .objIcon{width:30px;height:30px}
}
.mtbl .rowhdr{font-weight:var(--font-weight-bold);background:linear-gradient(90deg, rgba(33,150,243,.1), rgba(33,150,243,.04))}
.tick{
  width:22px;height:22px;border-radius:9px;border:1px solid var(--line);
  display:inline-grid;place-items:center;font-weight:1100;font-size:13px;
  background:var(--bg);color:var(--muted)
}
.tick.on{
  background:rgba(244,67,54,.15);
  border-color:var(--color-danger);
  color:var(--color-danger);
}

/* --- ERP Loading Overlay (2s) --- */
.loadingOverlay{
  position:fixed;
  inset:0;
  display:none;
  align-items:center;
  justify-content:center;
  background:rgba(7,16,32,.58);
  backdrop-filter:blur(6px);
  z-index:80;
}
.loadingOverlay.show{display:flex}
.loadingCard{
  display:flex;
  align-items:center;
  gap:var(--spacing-md);
  padding:var(--spacing-md) var(--spacing-lg);
  border-radius:var(--radius-lg);
  background:var(--color-bg-card);
  border:1px solid var(--line);
  box-shadow:var(--shadow-lg);
  min-width:min(520px, 92vw);
  font-family:var(--font);
}
.loadingGif{width:96px;height:96px}
.loadingTitle{font-weight:var(--font-weight-bold);font-size:var(--font-size-sm);letter-spacing:.2px}
.loadingSub{margin-top:2px;font-size:var(--font-size-xs);color:var(--muted);font-weight:var(--font-weight-semibold)}
.loadingText{min-width:0}

@media (prefers-reduced-motion: no-preference){
  .loadingCard{animation: pop .18s ease-out}
  @keyframes pop{
    from{transform:translateY(6px);opacity:0}
    to{transform:translateY(0);opacity:1}
  }
}


/* --- Donut KPI Cards --- */
.donutCard .donutRow{
  margin-top:10px;
  display:flex;
  align-items:center;
  gap:14px;
}
.donutWrap{
  position:relative;
  width:96px;
  height:96px;
  flex:0 0 auto;
  border-radius:22px;
}
.donutSvg svg{
  width:96px;
  height:96px;
  display:block;
  filter: drop-shadow(0 2px 6px rgba(0,0,0,.08));
}
.donutCenter{
  position:absolute;
  inset:0;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  padding:20px;
  pointer-events:none;
  text-align:center;
  box-sizing:border-box;
}
.donutPct{
  font-size:20px;
  font-weight:1000;
  line-height:1.15;
  letter-spacing:-.02em;
  font-variant-numeric: tabular-nums;
  color:var(--ink);
  display:block;
}
.donutLbl{
  margin-top:2px;
  font-size:9px;
  font-weight:700;
  line-height:1.2;
  letter-spacing:.08em;
  text-transform:uppercase;
  color:var(--color-text-secondary);
  display:block;
}
.donutInfo .val{
  font-size:32px;
  font-weight:1000;
  letter-spacing:-.02em;
}
.donutInfo .sub{
  margin-top:4px;
  font-size:12px;
  color:var(--muted);
  font-weight:800;
  display:flex;
  align-items:center;
  gap:8px;
  flex-wrap:wrap;
}
.donutInfo .sub .sema{
  width:10px;
  height:10px;
  border-radius:50%;
  display:inline-block;
}

@media (max-width: 860px){
  .donutCard .donutRow{align-items:flex-start}
  .donutInfo .val{font-size:28px}
}

/* Bullet graphs (viñetas) */
.bullets{
  margin-top:10px;
  display:grid;
  gap:10px;
}
.bulletRow{
  display:grid;
  grid-template-columns: 1.2fr 1.4fr 0.7fr;
  gap:10px;
  align-items:center;
}
.bulletRow .name{font-weight:900}
.bulletRow .meta{font-size:12px;color:var(--muted);font-weight:800}

.bullet{
  position:relative;
  height:14px;
  border-radius:999px;
  background:var(--bg);
  border:1px solid var(--line);
  overflow:hidden;
}
.bullet .range{
  position:absolute;
  top:0;bottom:0;
  opacity:.18;
}
.bullet .range.good{background:var(--good)}
.bullet .range.warn{background:var(--warn)}
.bullet .range.bad{background:var(--bad)}

.bullet .measure{
  position:absolute;
  left:0;
  top:3px;
  height:8px;
  border-radius:999px;
  background:var(--color-primary);
}
.bullet .target{
  position:absolute;
  top:-2px;
  width:2px;
  height:18px;
  background:var(--ink);
  opacity:.85;
}



/* --- Strategy map (BSC2) - auto layout, no overlap --- */
.maprows{
  display:grid;
  gap:12px;
  margin-top:6px;
}
.maprow{
  display:grid;
  grid-template-columns: 180px 1fr;
  gap:14px;
  align-items:stretch;
  padding:6px 0 12px;
}
.maprow:not(:last-child){
  border-bottom:2px dotted var(--line);
}
.laneLabel{
  min-height:110px;
  border-radius:16px;
  border:1px solid var(--line);
  background:linear-gradient(90deg, rgba(15,23,42,.06), rgba(15,23,42,.02));
  display:flex;align-items:center;justify-content:center;
  font-weight:900;
  color:var(--muted);
}
.laneCards{
  border-radius:var(--radius-lg);
  border:1px solid var(--line);
  background:linear-gradient(180deg,var(--color-bg-card),var(--color-bg));
  padding:12px;
  display:grid;
  gap:12px;
  grid-template-columns:repeat(auto-fit, minmax(240px, 1fr));
  align-content:start;
}
.mapcard{
  padding:var(--spacing-sm) 12px;
  border-radius:var(--radius-md);
  border:1px solid rgba(33,150,243,.2);
  background:var(--color-bg-card);
  box-shadow:var(--shadow);
  cursor:pointer;
  min-height:92px;
  font-family:var(--font);
}
.mapcard .obj{font-size:11px;color:var(--muted);font-weight:var(--font-weight-semibold);line-height:1.2}
.mapcard .kpi{font-weight:var(--font-weight-bold);margin-top:var(--spacing-xs);line-height:1.15}
.mapcard .chips{margin-top:var(--spacing-sm);display:flex;flex-wrap:wrap;gap:var(--spacing-sm);align-items:center}
.mapcard .chip{
  font-size:var(--font-size-xs);font-weight:var(--font-weight-bold);
  padding:5px 8px;border-radius:999px;
  background:rgba(33,150,243,.1);
  border:1px solid rgba(33,150,243,.2);
}
.mapcard .chip.good{background:rgba(76,175,80,.12);border-color:rgba(76,175,80,.25)}
.mapcard .chip.warn{background:rgba(255,152,0,.14);border-color:rgba(255,152,0,.25)}
.mapcard .chip.bad{background:rgba(244,67,54,.12);border-color:rgba(244,67,54,.25)}



/* --- Sidebar perfection: submenús tipo botones (sin desbordes, sin scroll horizontal) --- */
.sidebar{ overflow-x:hidden; }
.navModern{
  overflow-x:hidden !important;
  overflow-y:auto !important;
  overscroll-behavior:contain;
}
/* Oculta cualquier scrollbar horizontal (y evita el “blink” en algunos navegadores) */
.navModern::-webkit-scrollbar{ width:0px; height:0px; }
.navModern{ scrollbar-width:none; }

/* Grids: se adaptan al ancho del sidebar sin provocar overflow */
.tileGrid,
.subGrid{
  width:100%;
  grid-template-columns: repeat(auto-fit, minmax(118px, 1fr)) !important;
}

/* Botones: nunca empujan el ancho */
.navTile,
.subTile{
  width:100%;
  min-width:0;
}

/* Submenús: mismos “tiles” que el menú principal (icono arriba, texto centrado) */
.subTile{
  text-align:center !important;
  display:flex !important;
  flex-direction:column !important;
  align-items:center !important;
  justify-content:center !important;
  gap:6px !important;
  padding:12px 8px 10px !important;
  border-radius:18px !important;
}

/* Icono del submenú: tamaño consistente con el menú padre */
.subIcon{
  width:44px !important;
  height:44px !important;
  border-radius:16px !important;
  margin:0 auto 2px !important;
  font-size:22px !important;
}

/* Etiquetas: ortografía visible, dos líneas máximo, sin desbordes */
.tileLbl,
.subLbl{
  max-width:100%;
  padding:0 2px;
  line-height:1.1;
  white-space:normal !important;
  word-break:break-word;
  hyphens:auto;
}

.tileLbl{ font-size:12px !important; }

.subLbl{
  font-size:12px !important;
  font-weight:900 !important;
  letter-spacing:.08em !important;
  text-transform:uppercase !important;
  display:block;
}

/* Clamp a 2 líneas cuando el navegador lo soporte (evita que “rompa” el botón) */
@supports (-webkit-line-clamp: 2){
  .tileLbl,
  .subLbl{
    display:-webkit-box;
    -webkit-line-clamp:2;
    -webkit-box-orient:vertical;
    overflow:hidden;
  }
}



/* Encabezado del submenú: siempre en 2 líneas (sin empujar el ancho) */
.subHdr{
  flex-direction:column !important;
  align-items:flex-start !important;
  justify-content:flex-start !important;
  gap:2px !important;
}
.subHdrTitle, .subHdrSub{
  max-width:100%;
  white-space:normal;
}


/* === ERP Connect (pantalla integrada) === */
.erpCard{ padding:18px; }
.erpHead h3{ margin:0; }
.erpHead .note{ margin-top:6px; }

.erpStage{
  position:relative;
  margin-top:12px;
  height: calc(100vh - 260px);
  min-height: 520px;
}

.erpFrame{
  position:absolute;
  inset:0;
  border-radius: var(--radius2);
  overflow:hidden;
  background:#0b1020;
  box-shadow: var(--shadow);
  border:1px solid rgba(255,255,255,.08);
}

.erpShot{
  width:100%;
  height:100%;
  object-fit:contain;
  object-position:center;
  display:block;
  filter: contrast(1.05) saturate(1.05);
}

.erpHud{
  position:absolute;
  left:16px;
  right:16px;
  bottom:16px;
  padding:12px 12px 10px 12px;
  border-radius: 14px;
  background: rgba(2,6,23,.60);
  backdrop-filter: blur(6px);
  border: 1px solid rgba(255,255,255,.10);
  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
  color: rgba(219,234,254,.95);
}

.erpCmd{
  font-size: 13px;
  color: rgba(134,239,172,.92);
  margin-bottom: 8px;
}

.cursor{
  display:inline-block;
  margin-left:2px;
  animation: blink 1.1s steps(2, end) infinite;
}
@keyframes blink{ 50%{ opacity:.2; } }

.erpProg{ display:block; }
.erpBar{
  height:10px;
  border-radius: 999px;
  background: rgba(148,163,184,.20);
  overflow:hidden;
  border:1px solid rgba(255,255,255,.10);
}
.erpBarFill{
  height:100%;
  width:0%;
  border-radius: 999px;
  background: rgba(45,140,255,.95);
  transition: width .18s linear;
}

.erpMetaRow{
  display:flex;
  justify-content:space-between;
  gap:12px;
  margin-top:8px;
  font-size:12px;
  color: rgba(226,232,240,.95);
  flex-wrap:wrap;
}
.erpStatus{
  margin-top:6px;
  font-size:12px;
  color: rgba(148,163,184,.95);
}

.erpFoot{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:12px;
  margin-top:10px;
  flex-wrap:wrap;
}
.note.small{ font-size:12px; }



.erpBelow{
  margin-top:12px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:12px;
  flex-wrap:wrap;
}
.erpActions{ display:flex; gap:10px; }


/* === ERP Connect terminal (simulación real 0→30s) === */


.erpTerm{
  position:absolute;
  inset:0;
  padding:18px;
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  color: rgba(226,232,240,.92);
  display:flex;
  flex-direction:column;
  gap:14px;
}

.erpTerm::before{
  content:"";
  position:absolute;
  inset:0;
  background-image: var(--erp-bg);
  background-size: cover;
  background-position: center;
  opacity: .10;
  pointer-events:none;
  filter: saturate(1.05) contrast(1.05);
}

.erpTerm[data-bg]{
  --erp-bg: url("erp-connect-extraction.gif");
}
.erpTerm[data-bg]::before{
  background-image: url("erp-connect-extraction.gif");
}

.termTop{
  position:relative;
  z-index:1;
  flex-shrink:0;
  display:flex;
  align-items:center;
  gap:12px;
  padding:10px 14px;
  border-radius: 14px;
  background: rgba(255,255,255,.08);
  border:1px solid rgba(255,255,255,.10);
}

.termDots{ display:flex; gap:8px; }
.termDots .dot{
  width:10px; height:10px; border-radius:50%;
  background: rgba(255,255,255,.35);
  box-shadow: 0 0 0 1px rgba(0,0,0,.35) inset;
}
.termDots .dot.red{ background: #ff5f57; }
.termDots .dot.yellow{ background: #febc2e; }
.termDots .dot.green{ background: #28c840; }

.termTitle{
  font-size: 13px;
  font-weight: 600;
  letter-spacing: .2px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.termMain{
  display:flex;
  flex-direction:column;
  gap:10px;
  width:100%;
  flex:1 1 0;
  min-height:0;
  padding: 6px 2px;
}

.termLogsWrap{
  flex:1 1 0;
  min-height:0;
  width:100%;
  border-radius: 14px;
  background: rgba(0,0,0,.22);
  border: 1px solid rgba(255,255,255,.10);
  padding: 10px 12px;
  overflow:hidden;
  position: relative;
  display:flex;
  flex-direction:column;
}

.termLogs{
  flex:1 1 0;
  min-height:0;
  overflow-y:auto;
  overflow-x:hidden;
  padding-right: 6px;
  scrollbar-width: thin;
  -ms-overflow-style: auto;
}
.termLogs::-webkit-scrollbar{ width:0; height:0; }

.termLine{
  font-size: 12.5px;
  line-height: 1.35;
  color: rgba(226,232,240,.88);
  margin: 0 0 4px 0;
  white-space: pre-wrap;
  word-break: break-word;
  text-shadow: 0 1px 0 rgba(0,0,0,.25);
}
.termLine .tTs{
  color: rgba(148,163,184,.9);
  font-variant-numeric: tabular-nums;
  margin-right: 10px;
}
.termLine .tInfo{ color: rgba(125,211,252,.95); font-weight: 800; }
.termLine .tOk{ color: rgba(34,197,94,.95); font-weight: 900; }
.termLine .tWarn{ color: rgba(251,191,36,.95); font-weight: 900; }
.termLine .tDim{ color: rgba(148,163,184,.95); }

/* subtle scanline */
.termLogsWrap::after{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;
  background-image: linear-gradient(to bottom, rgba(255,255,255,.03), rgba(255,255,255,0));
  opacity:.35;
  mix-blend-mode: overlay;
}

.termBody{
  position:relative;
  z-index:1;
  flex:1 1 0;
  min-height:0;
  padding: 0;
  display:flex;
  flex-direction:column;
  align-items:stretch;
  width:100%;
}

.termBanner{
  color: rgba(125, 211, 252, .95);
  font-weight: 700;
  font-size: 14px;
  letter-spacing: .2px;
  text-shadow: 0 1px 0 rgba(0,0,0,.25);
}

.termFooter{
  position:relative;
  z-index:1;
  flex-shrink:0;
  padding: 14px 14px 12px;
  border-radius: 14px;
  background: rgba(0,0,0,.35);
  border:1px solid rgba(255,255,255,.10);
}

.termCmd{
  color: rgba(34, 197, 94, .95);
  font-weight: 700;
  font-size: 15px;
  margin-bottom: 10px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.termDollar{ color: rgba(34,197,94,.95); }
.termCmdText{ color: rgba(34,197,94,.92); }
.termCursor{ margin-left: 6px; }

.termRow{
  display:flex;
  align-items:center;
  gap:12px;
  flex-wrap:wrap;
  font-size: 13px;
  color: rgba(226,232,240,.85);
}

.termLabel{ opacity:.9; }

.termPct{
  min-width: 62px;
  text-align: right;
  font-variant-numeric: tabular-nums;
}

.termGb{
  min-width: 150px;
  text-align: right;
  font-variant-numeric: tabular-nums;
}

.termBar{
  flex: 1;
  min-width: 220px;
  height: 12px;
  border-radius: 999px;
  background: rgba(255,255,255,.12);
  overflow: hidden;
  border: 1px solid rgba(255,255,255,.10);
}

.termBarFill{
  height:100%;
  width:0%;
  border-radius: 999px;
  background: rgba(34,197,94,.95);
  box-shadow: 0 0 0 1px rgba(0,0,0,.20) inset;
  transition: width .12s linear;
}

.termRow2{
  display:flex;
  justify-content:space-between;
  gap:16px;
  margin-top: 10px;
  font-size: 13px;
  color: rgba(226,232,240,.85);
  flex-wrap:wrap;
}

.termTimeWrap, .termStatusWrap{
  display:flex;
  align-items:center;
  gap:10px;
}

.termTime, .termStatus{
  font-variant-numeric: tabular-nums;
  font-weight: 700;
  color: rgba(226,232,240,.92);
}
